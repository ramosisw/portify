(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{115:function(e,t,n){e.exports=n(162)},162:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(21),i=n.n(o),c=n(42),s=n(26),u=n(27),l=n(29),p=n(28),m=n(30),f=n(105),d=n.n(f),h=n(107),g=n(77),E=n.n(g),b=n(181),y=n(89),v=n.n(y),O=n(91),w=n.n(O),j=n(92),k=n.n(j),R=n(97),_=n.n(R),S=n(87),x=n.n(S),C=n(88),T=n.n(C),I=n(58),U=n.n(I),L=n(182),A=n(180),N=n(90),P=n.n(N),F=n(6),D={success:v.a,warning:P.a,error:w.a,info:k.a},z=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.className,a=e.message,o=e.onClose,i=e.variant,c=e.onUndo,s=Object(h.a)(e,["classes","className","message","onClose","variant","onUndo"]),u=D[i];return r.a.createElement(A.a,Object.assign({className:E()(t[i],n),"aria-describedby":"client-snackbar",message:r.a.createElement("span",{id:"client-snackbar",className:t.message},u&&r.a.createElement(u,{className:E()(t.icon,t.iconVariant)}),a),action:[c&&r.a.createElement(b.a,{key:"undo",className:t.undoButton,size:"small",onClick:c},"UNDO"),r.a.createElement(L.a,{key:"close","aria-label":"Close",color:"inherit",className:t.close,onClick:o},r.a.createElement(_.a,{className:t.icon}))]},s))}}]),t}(r.a.Component),G=Object(F.a)(function(e){return{success:{backgroundColor:x.a[600],color:e.palette.primary.contrastText},error:{backgroundColor:e.palette.error.dark,color:e.palette.primary.contrastText},info:{backgroundColor:e.palette.primary.dark,color:e.palette.primary.contrastText},undo:{backgroundColor:U.a[900],color:e.palette.getContrastText(U.a[800])},undoButton:{color:e.palette.secondary.contrastText},warning:{backgroundColor:T.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing()},close:{padding:e.spacing()/2},message:{display:"flex",alignItems:"center"}}})(z),M=n(39),W=n(106),X=n(190),B=n(16),J={GET_PROFILE_REQUEST:"".concat("USER","_GET_PROFILE_REQUEST"),GET_PROFILE_SUCCESS:"".concat("USER","_GET_PROFILE_SUCCESS"),GET_PROFILE_FAILURE:"".concat("USER","_GET_PROFILE_FAILURE"),EXPORT_REQUEST:"".concat("USER","_EXPORT_REQUEST"),EXPORT_SUCCESS:"".concat("USER","_EXPORT_SUCCESS"),EXPORT_FAILURE:"".concat("USER","_EXPORT_FAILURE"),IMPORT_REQUEST:"".concat("USER","_IMPORT_REQUEST"),IMPORT_SUCCESS:"".concat("USER","_IMPORT_SUCCESS"),IMPORT_FAILURE:"".concat("USER","_IMPORT_FAILURE")},Q={SUCCESS:"ALERT_SUCCESS",ERROR:"ALERT_ERROR",INFO:"ALERT_INFO",CLEAR:"ALERT_CLEAR",UNDO:"ALERT_UNDO"},V={success:function(e){return{type:Q.SUCCESS,message:e}},error:function(e){return{type:Q.ERROR,message:e}},undo:function(e,t){return Object(B.a)({type:Q.UNDO,message:e},t)},info:function(e){return{type:Q.INFO,message:e}},clear:function(){return{type:Q.CLEAR}}};var H=n(7),$=n.n(H),q=n(17),K={isDevelopment:!1,loggedItem:"user",baseName:"/portify",spotifyApi:{url:"https://api.spotify.com/v1",scope:"user-read-private user-read-email playlist-read-private playlist-modify-public playlist-modify-private user-library-read user-library-modify playlist-read-collaborative",redirect_uri:"https://ramosisw.github.io/portify",client_id:"ba0034384cb24045a078ea5ceae26480"}},Y=n(18),Z=Object(Y.a)({basename:K.baseName});function ee(){var e=JSON.parse(localStorage.getItem(K.loggedItem)),t={"Content-Type":"application/json"};return e&&e.access_token?Object(B.a)({Authorization:"Bearer "+e.access_token},t):Object(B.a)({},t)}function te(e){return e.text().then(function(t){var n=t&&JSON.parse(t);if(!e.ok){401===e.status&&(localStorage.removeItem(K.loggedItem),window.location.reload(!0));var a=n&&n.message||e.statusText;return Promise.reject(a)}return n})}var ne=n(37),ae=n(78),re=n(98),oe={display_name:"User Name"};var ie,ce=Object(ne.c)({alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Q.SUCCESS:return{type:"success",message:t.message};case Q.ERROR:return{type:"error",message:t.message};case Q.INFO:return{type:"info",message:t.message};case Q.UNDO:return Object(B.a)({},t,{undo:!0,type:"undo",message:t.message});case Q.CLEAR:return{};default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case J.GET_PROFILE_SUCCESS:return Object(B.a)({},t.data);default:return e}}}),se=K.isDevelopment?Object(re.createLogger)():null,ue=Object(ne.d)(ce,K.isDevelopment?Object(ne.a)(ae.a,se):Object(ne.a)(ae.a)),le=n(38),pe=n.n(le),me=function(e){var t=e;return{offset:t.offset||0,limit:t.limit||50}},fe={getMe:function(){var e=Object(q.a)($.a.mark(function e(){var t,n;return $.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"GET",headers:Object(B.a)({},ee())},n="".concat(K.spotifyApi.url,"/me"),e.next=4,fetch(n,t).then(te);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),getPlaylists:function(){var e=Object(q.a)($.a.mark(function e(t){var n,a,r;return $.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=me(t),n={method:"GET",headers:Object(B.a)({},ee())},a=pe.a.stringify(t),r="".concat(K.spotifyApi.url,"/me/playlists?").concat(a),e.next=6,fetch(r,n).then(te);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),getPlaylistTracks:function(){var e=Object(q.a)($.a.mark(function e(t,n){var a,r,o;return $.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=me(n),a={method:"GET",headers:Object(B.a)({},ee())},r=pe.a.stringify(n),o="".concat(K.spotifyApi.url,"/playlists/").concat(t,"/tracks?").concat(r),e.next=6,fetch(o,a).then(te);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),getTracks:function(){var e=Object(q.a)($.a.mark(function e(t){var n,a,r;return $.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=me(t),n={method:"GET",headers:Object(B.a)({},ee())},a=pe.a.stringify(t),r="".concat(K.spotifyApi.url,"/me/tracks?").concat(a),e.next=6,fetch(r,n).then(te);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},de=n(20),he=function(){var e=Object(q.a)($.a.mark(function e(){var t,n,a,r,o=arguments;return $.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},n=t.playlists,a=t.offset,r=t.limit,n=n||{items:[]},e.next=5,fe.getPlaylists({offset:a,limit:r}).then(function(){var e=Object(q.a)($.a.mark(function e(t){var a;return $.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n={total:t.total,items:[].concat(Object(de.a)(n.items),Object(de.a)(t.items))},!t.next){e.next=6;break}return e.next=4,he({playlists:n,offset:t.offset+t.limit,limit:t.limit});case 4:a=e.sent,n={items:[].concat(Object(de.a)(n.items),Object(de.a)(a.items))};case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),function(e){throw e});case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),ge=function(){var e=Object(q.a)($.a.mark(function e(){var t,n,a,r,o,i=arguments;return $.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=t.tracks,a=t.playlist_id,r=t.offset,o=t.limit,n=n||{items:[]},e.next=5,fe.getPlaylistTracks(a,{offset:r,limit:o}).then(function(){var e=Object(q.a)($.a.mark(function e(t){var r,o,i;return $.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.items.filter(function(e){return!e.is_local&&null!==e.track}),o=r.map(function(e){var t=e.track;return{id:t.id,name:t.name,uri:t.uri}}),n={items:[].concat(Object(de.a)(n.items),Object(de.a)(o))},!t.next){e.next=8;break}return e.next=6,ge({tracks:n,playlist_id:a,offset:t.offset+t.limit,limit:t.limit});case 6:i=e.sent,n={items:[].concat(Object(de.a)(n.items),Object(de.a)(i.items))};case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),function(e){throw e});case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),Ee=function(){var e=Object(q.a)($.a.mark(function e(){var t,n,a,r,o=arguments;return $.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},n=t.tracks,a=t.offset,r=t.limit,n=n||{items:[]},e.next=5,fe.getTracks({offset:a,limit:r}).then(function(){var e=Object(q.a)($.a.mark(function e(t){var a,r,o;return $.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.items.filter(function(e){return!e.is_local&&null!==e.track}),r=a.map(function(e){var t=e.track;return{id:t.id,name:t.name,uri:t.uri}}),n={items:[].concat(Object(de.a)(n.items),Object(de.a)(r))},!t.next){e.next=8;break}return e.next=6,Ee({tracks:n,offset:t.offset+t.limit,limit:t.limit});case 6:o=e.sent,n={items:[].concat(Object(de.a)(n.items),Object(de.a)(o.items))};case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),function(e){throw e});case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),be={downloadJson:function(e,t){var n=document.createElement("a");if(n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),n.setAttribute("download",e),document.createEvent){var a=document.createEvent("MouseEvents");a.initEvent("click",!0,!0),n.dispatchEvent(a)}else n.click()},exportData:function(){var e=Object(q.a)($.a.mark(function e(){return $.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(q.a)($.a.mark(function e(t,n){var a;return $.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={version:1,user_id:"",display_name:"",follow_playlists:[],playlists:[],tracks:[]},e.next=3,Ee().then(function(e){a.tracks=e.items},function(e){n(e)});case 3:return e.next=5,fe.getMe().then(function(e){a.user_id=e.id,a.display_name=e.display_name},function(e){n(e)});case 5:return e.next=7,he().then(function(){var e=Object(q.a)($.a.mark(function e(t){var r,o;return $.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.items.filter(function(e){return e.owner.id!==a.user_id}).map(function(e){return{id:e.id,name:e.name,uri:e.uri}}),o=t.items.filter(function(e){return e.owner.id===a.user_id}).map(function(){var e=Object(q.a)($.a.mark(function e(t){var a,r,o,i,c;return $.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.collaborative,r=t.id,o=t.name,i=t.uri,c=[],e.next=4,ge({playlist_id:t.id}).then(function(e){c=e.items},function(e){n(e)});case 4:return e.abrupt("return",{collaborative:a,id:r,name:o,public:t.public,tracks:c,uri:i});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),a.follow_playlists=r,e.next=5,Promise.all(o);case 5:a.playlists=e.sent;case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),function(e){n(e)});case 7:t(a);case 8:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},ye={getMe:function(){return function(e){e({type:J.GET_PROFILE_REQUEST}),fe.getMe().then(function(t){e(function(e){return{type:J.GET_PROFILE_SUCCESS,data:e}}(t))},function(t){e(function(e){return{type:J.GET_PROFILE_FAILURE,error:e}}(t.toString())),e(V.error(t.toString()))})}},exportData:function(){return function(e){e({type:J.EXPORT_REQUEST}),be.exportData().then(function(t){e(function(e){return{type:J.EXPORT_SUCCESS,data:e}}(t)),be.downloadJson("".concat(t.user_id,"_v").concat(t.version,".json"),JSON.stringify(t,null,4))},function(t){e(function(e){return{type:J.EXPORT_FAILURE,error:e}}(t))})}}},ve=n(35),Oe=n(44),we=n(66),je=n(102),ke=n.n(je),Re=n(191),_e=n(101),Se=n.n(_e),xe=n(109),Ce=n(183),Te=n(108),Ie=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(p.a)(t).call(this,e))).state={width:0,height:0,logged:!1},n.updateWindowDimensions=n.updateWindowDimensions.bind(Object(Oe.a)(n)),n.onAuthorize=n.onAuthorize.bind(Object(Oe.a)(n)),n.onCallback=n.onCallback.bind(Object(Oe.a)(n)),localStorage.removeItem(K.loggedItem),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions),window.addEventListener("message",this.onCallback)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"updateWindowDimensions",value:function(){this.setState({width:window.innerWidth,height:window.innerHeight})}},{key:"onCallback",value:function(){ie&&ie.close(),localStorage.getItem(K.loggedItem)&&this.setState({logged:!0})}},{key:"onAuthorize",value:function(){var e=this.state.width/2-250,t=this.state.height/2-390,n={client_id:K.spotifyApi.client_id,redirect_uri:K.spotifyApi.redirect_uri,scope:K.spotifyApi.scope,response_type:"token",show_dialog:"true"};ie=window.open("https://accounts.spotify.com/authorize?"+pe.a.stringify(n),"Spotify","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=500, height=780, top="+t+", left="+e)}},{key:"render",value:function(){if(this.state.logged)return r.a.createElement(M.a,{to:"/"});var e=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Re.a,null),r.a.createElement("main",{className:e.layout},r.a.createElement(Te.a,{className:e.paper},r.a.createElement(Ce.a,{className:e.avatar,color:"primary"},r.a.createElement(Se.a,null)),r.a.createElement(xe.a,{variant:"h5"},"We need your Authorization"),r.a.createElement(b.a,{onClick:this.onAuthorize,fullWidth:!0,variant:"contained",color:"secondary",className:e.submit},"Proced to Authorization"))))}}]),t}(a.Component),Ue=ke()(function(e){return{layout:Object(we.a)({width:"auto",display:"block",marginLeft:e.spacing(3),marginRight:e.spacing(3)},e.breakpoints.up(400+2*e.spacing(3)),{width:400,marginLeft:"auto",marginRight:"auto"}),paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(e.spacing(2),"px ").concat(e.spacing(3),"px ").concat(e.spacing(3),"px")},avatar:{margin:e.spacing(),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing()},submit:{marginTop:e.spacing(3)}}})(Ie),Le=n(103),Ae=n.n(Le),Ne=n(104),Pe=n.n(Ne),Fe=n(189),De=n(185),ze=n(188),Ge=n(184),Me=n(186),We=n(187),Xe=r.a.forwardRef(function(e,t){return r.a.createElement(c.b,Object.assign({innerRef:t,to:"/login"},e))}),Be=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={userLoged:!!localStorage.getItem(K.loggedItem)},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.state.userLoged&&this.props.dispatch(ye.getMe())}},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.root},r.a.createElement(Ge.a,{position:"static"},r.a.createElement(De.a,null,r.a.createElement(Me.a,null,r.a.createElement(xe.a,{variant:"h6",className:e.title},"Portify"),r.a.createElement(We.a,{to:"/about"},"About"),this.state.userLoged&&r.a.createElement(xe.a,{component:"p",color:"inherit",align:"center",noWrap:!0,className:e.toolbarTitle},this.props.user.display_name),this.state.userLoged?r.a.createElement(We.a,{component:Xe,variant:"body2",color:"inherit"},"It's no me"):r.a.createElement(b.a,{color:"inherit",component:Xe,size:"small"},"Login")))))}}]),t}(r.a.Component),Je=Object(F.a)(function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},toolbarTitle:{marginRight:10}}})(Object(ve.b)(function(e){return{user:e.user}})(Be)),Qe=function(e){function t(e){var n;Object(s.a)(this,t),(n=Object(l.a)(this,Object(p.a)(t).call(this,e))).onExport=function(){n.props.dispatch(V.info("Exporting data...")),n.props.dispatch(ye.exportData())},n.onImport=function(){n.props.dispatch(V.info("import!"))},n.state={userLoged:!!localStorage.getItem(K.loggedItem)};var a=pe.a.parse(n.props.location.hash);!localStorage.getItem(K.loggedItem)&&a.access_token&&(localStorage.setItem(K.loggedItem,JSON.stringify(Object(B.a)({},a))),(window.self===window.top?window.opener:window.parent).postMessage(""));return n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Re.a,null),r.a.createElement("div",null,r.a.createElement(Je,null),r.a.createElement("main",{className:e.content},r.a.createElement("div",{className:e.appBarSpacer}),r.a.createElement(De.a,null,r.a.createElement(xe.a,{variant:"h2",align:"center"},"Welcome to Portify."),r.a.createElement(xe.a,{variant:"h5",component:"p",align:"center"},"Export/Import your playlists from Spotify with json file."),this.state.userLoged&&r.a.createElement(ze.a,{className:e.options,container:!0,direction:"column",alignItems:"center"},r.a.createElement(ze.a,{item:!0},r.a.createElement(Fe.a,{size:"large",variant:"contained","aria-label":"Options",color:"secondary"},r.a.createElement(b.a,{onClick:this.onExport},"Export",r.a.createElement(Ae.a,{className:e.rightIcon})),r.a.createElement(b.a,{onClick:this.onImport},r.a.createElement(Pe.a,{className:e.leftIcon}),"Import"))))))))}}]),t}(a.Component),Ve=Object(F.a)(function(e){return{appBarSpacer:{marginTop:e.spacing(2)},options:{marginTop:e.spacing(5)},leftIcon:{marginRight:e.spacing(1)},rightIcon:{marginLeft:e.spacing(1)}}})(Object(ve.b)(function(e){return{users:e.users}})(Qe)),He=Object(W.a)({palette:{type:"dark",primary:{main:"#000",contrastText:"#fff"},secondary:{main:"#2ebd59",contrastText:"#fff"}},typography:{useNextVariants:!0},root:{display:"flex"}}),$e=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).handleClose=function(e){"clickaway"!==e&&n.props.dispatch(V.clear())},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.alert;return r.a.createElement(M.c,{history:Z},r.a.createElement(d.a,{theme:He},e.message&&r.a.createElement(X.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:!0,onClose:e.onClose||this.handleClose,autoHideDuration:2e3},r.a.createElement(G,{onClose:e.onClose||this.handleClose,variant:e.type,message:e.message,onUndo:e.onUndo})),r.a.createElement(M.b,{path:"/"},r.a.createElement(M.d,null,r.a.createElement(M.b,{path:"/login",component:Ue}),r.a.createElement(M.b,{path:"/",component:Ve})))))}}]),t}(r.a.Component);var qe=Object(ve.b)(function(e){return{alert:e.alert}})($e);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(ve.a,{store:ue},r.a.createElement(c.a,{basename:"/portify/"},r.a.createElement(qe,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[115,1,2]]]);
//# sourceMappingURL=main.86c61cc2.chunk.js.map