(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{115:function(e,t,n){e.exports=n(162)},162:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(21),i=n.n(o),c=n(26),s=n(27),u=n(29),l=n(28),p=n(30),m=n(105),f=n.n(m),d=n(107),h=n(77),g=n.n(h),E=n(181),b=n(89),y=n.n(b),v=n(91),O=n.n(v),w=n(92),j=n.n(w),k=n(97),R=n.n(k),_=n(87),S=n.n(_),x=n(88),C=n.n(x),T=n(58),I=n.n(T),U=n(182),L=n(180),N=n(90),A=n.n(N),P=n(6),F={success:y.a,warning:A.a,error:O.a,info:j.a},D=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.className,a=e.message,o=e.onClose,i=e.variant,c=e.onUndo,s=Object(d.a)(e,["classes","className","message","onClose","variant","onUndo"]),u=F[i];return r.a.createElement(L.a,Object.assign({className:g()(t[i],n),"aria-describedby":"client-snackbar",message:r.a.createElement("span",{id:"client-snackbar",className:t.message},u&&r.a.createElement(u,{className:g()(t.icon,t.iconVariant)}),a),action:[c&&r.a.createElement(E.a,{key:"undo",className:t.undoButton,size:"small",onClick:c},"UNDO"),r.a.createElement(U.a,{key:"close","aria-label":"Close",color:"inherit",className:t.close,onClick:o},r.a.createElement(R.a,{className:t.icon}))]},s))}}]),t}(r.a.Component),M=Object(P.a)(function(e){return{success:{backgroundColor:S.a[600],color:e.palette.primary.contrastText},error:{backgroundColor:e.palette.error.dark,color:e.palette.primary.contrastText},info:{backgroundColor:e.palette.primary.dark,color:e.palette.primary.contrastText},undo:{backgroundColor:I.a[900],color:e.palette.getContrastText(I.a[800])},undoButton:{color:e.palette.secondary.contrastText},warning:{backgroundColor:C.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing()},close:{padding:e.spacing()/2},message:{display:"flex",alignItems:"center"}}})(D),z=n(39),G=n(106),W=n(190),X=n(16),B={GET_PROFILE_REQUEST:"".concat("USER","_GET_PROFILE_REQUEST"),GET_PROFILE_SUCCESS:"".concat("USER","_GET_PROFILE_SUCCESS"),GET_PROFILE_FAILURE:"".concat("USER","_GET_PROFILE_FAILURE"),EXPORT_REQUEST:"".concat("USER","_EXPORT_REQUEST"),EXPORT_SUCCESS:"".concat("USER","_EXPORT_SUCCESS"),EXPORT_FAILURE:"".concat("USER","_EXPORT_FAILURE"),IMPORT_REQUEST:"".concat("USER","_IMPORT_REQUEST"),IMPORT_SUCCESS:"".concat("USER","_IMPORT_SUCCESS"),IMPORT_FAILURE:"".concat("USER","_IMPORT_FAILURE")},J={SUCCESS:"ALERT_SUCCESS",ERROR:"ALERT_ERROR",INFO:"ALERT_INFO",CLEAR:"ALERT_CLEAR",UNDO:"ALERT_UNDO"},Q={success:function(e){return{type:J.SUCCESS,message:e}},error:function(e){return{type:J.ERROR,message:e}},undo:function(e,t){return Object(X.a)({type:J.UNDO,message:e},t)},info:function(e){return{type:J.INFO,message:e}},clear:function(){return{type:J.CLEAR}}};var V=n(7),H=n.n(V),$=n(17),q={isDevelopment:!1,loggedItem:"user",baseName:"/portify",spotifyApi:{url:"https://api.spotify.com/v1",scope:"user-read-private user-read-email playlist-read-private playlist-modify-public playlist-modify-private user-library-read user-library-modify playlist-read-collaborative",redirect_uri:"https://ramosisw.github.io/portify",client_id:"ba0034384cb24045a078ea5ceae26480"}},K=n(18),Y=Object(K.a)({basename:q.baseName});function Z(){var e=JSON.parse(localStorage.getItem(q.loggedItem)),t={"Content-Type":"application/json"};return e&&e.access_token?Object(X.a)({Authorization:"Bearer "+e.access_token},t):Object(X.a)({},t)}function ee(e){return e.text().then(function(t){var n=t&&JSON.parse(t);if(!e.ok){401===e.status&&(localStorage.removeItem(q.loggedItem),window.location.reload(!0));var a=n&&n.message||e.statusText;return Promise.reject(a)}return n})}var te=n(37),ne=n(78),ae=n(98),re={display_name:"User Name"};var oe,ie=Object(te.c)({alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case J.SUCCESS:return{type:"success",message:t.message};case J.ERROR:return{type:"error",message:t.message};case J.INFO:return{type:"info",message:t.message};case J.UNDO:return Object(X.a)({},t,{undo:!0,type:"undo",message:t.message});case J.CLEAR:return{};default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B.GET_PROFILE_SUCCESS:return Object(X.a)({},t.data);default:return e}}}),ce=q.isDevelopment?Object(ae.createLogger)():null,se=Object(te.d)(ie,q.isDevelopment?Object(te.a)(ne.a,ce):Object(te.a)(ne.a)),ue=n(38),le=n.n(ue),pe=function(e){var t=e;return{offset:t.offset||0,limit:t.limit||50}},me={getMe:function(){var e=Object($.a)(H.a.mark(function e(){var t,n;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"GET",headers:Object(X.a)({},Z())},n="".concat(q.spotifyApi.url,"/me"),e.next=4,fetch(n,t).then(ee);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),getPlaylists:function(){var e=Object($.a)(H.a.mark(function e(t){var n,a,r;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=pe(t),n={method:"GET",headers:Object(X.a)({},Z())},a=le.a.stringify(t),r="".concat(q.spotifyApi.url,"/me/playlists?").concat(a),e.next=6,fetch(r,n).then(ee);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),getPlaylistTracks:function(){var e=Object($.a)(H.a.mark(function e(t,n){var a,r,o;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=pe(n),a={method:"GET",headers:Object(X.a)({},Z())},r=le.a.stringify(n),o="".concat(q.spotifyApi.url,"/playlists/").concat(t,"/tracks?").concat(r),e.next=6,fetch(o,a).then(ee);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),getTracks:function(){var e=Object($.a)(H.a.mark(function e(t){var n,a,r;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=pe(t),n={method:"GET",headers:Object(X.a)({},Z())},a=le.a.stringify(t),r="".concat(q.spotifyApi.url,"/me/tracks?").concat(a),e.next=6,fetch(r,n).then(ee);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},fe=n(20),de=function(){var e=Object($.a)(H.a.mark(function e(){var t,n,a,r,o=arguments;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},n=t.playlists,a=t.offset,r=t.limit,n=n||{items:[]},e.next=5,me.getPlaylists({offset:a,limit:r}).then(function(){var e=Object($.a)(H.a.mark(function e(t){var a;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n={total:t.total,items:[].concat(Object(fe.a)(n.items),Object(fe.a)(t.items))},!t.next){e.next=6;break}return e.next=4,de({playlists:n,offset:t.offset+t.limit,limit:t.limit});case 4:a=e.sent,n={items:[].concat(Object(fe.a)(n.items),Object(fe.a)(a.items))};case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),function(e){throw e});case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),he=function(){var e=Object($.a)(H.a.mark(function e(){var t,n,a,r,o,i=arguments;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=t.tracks,a=t.playlist_id,r=t.offset,o=t.limit,n=n||{items:[]},e.next=5,me.getPlaylistTracks(a,{offset:r,limit:o}).then(function(){var e=Object($.a)(H.a.mark(function e(t){var r,o,i;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.items.filter(function(e){return!e.is_local&&null!==e.track}),o=r.map(function(e){var t=e.track;return{id:t.id,name:t.name,uri:t.uri}}),n={items:[].concat(Object(fe.a)(n.items),Object(fe.a)(o))},!t.next){e.next=8;break}return e.next=6,he({tracks:n,playlist_id:a,offset:t.offset+t.limit,limit:t.limit});case 6:i=e.sent,n={items:[].concat(Object(fe.a)(n.items),Object(fe.a)(i.items))};case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),function(e){throw e});case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),ge=function(){var e=Object($.a)(H.a.mark(function e(){var t,n,a,r,o=arguments;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},n=t.tracks,a=t.offset,r=t.limit,n=n||{items:[]},e.next=5,me.getTracks({offset:a,limit:r}).then(function(){var e=Object($.a)(H.a.mark(function e(t){var a,r,o;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.items.filter(function(e){return!e.is_local&&null!==e.track}),r=a.map(function(e){var t=e.track;return{id:t.id,name:t.name,uri:t.uri}}),n={items:[].concat(Object(fe.a)(n.items),Object(fe.a)(r))},!t.next){e.next=8;break}return e.next=6,ge({tracks:n,offset:t.offset+t.limit,limit:t.limit});case 6:o=e.sent,n={items:[].concat(Object(fe.a)(n.items),Object(fe.a)(o.items))};case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),function(e){throw e});case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),Ee={downloadJson:function(e,t){var n=document.createElement("a");if(n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),n.setAttribute("download",e),document.createEvent){var a=document.createEvent("MouseEvents");a.initEvent("click",!0,!0),n.dispatchEvent(a)}else n.click()},exportData:function(){var e=Object($.a)(H.a.mark(function e(){return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object($.a)(H.a.mark(function e(t,n){var a;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={version:1,user_id:"",display_name:"",follow_playlists:[],playlists:[],tracks:[]},e.next=3,ge().then(function(e){a.tracks=e.items},function(e){n(e)});case 3:return e.next=5,me.getMe().then(function(e){a.user_id=e.id,a.display_name=e.display_name},function(e){n(e)});case 5:return e.next=7,de().then(function(){var e=Object($.a)(H.a.mark(function e(t){var r,o;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.items.filter(function(e){return e.owner.id!==a.user_id}).map(function(e){return{id:e.id,name:e.name,uri:e.uri}}),o=t.items.filter(function(e){return e.owner.id===a.user_id}).map(function(){var e=Object($.a)(H.a.mark(function e(t){var a,r,o,i,c;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.collaborative,r=t.id,o=t.name,i=t.uri,c=[],e.next=4,he({playlist_id:t.id}).then(function(e){c=e.items},function(e){n(e)});case 4:return e.abrupt("return",{collaborative:a,id:r,name:o,public:t.public,tracks:c,uri:i});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),a.follow_playlists=r,e.next=5,Promise.all(o);case 5:a.playlists=e.sent;case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),function(e){n(e)});case 7:t(a);case 8:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},be={getMe:function(){return function(e){e({type:B.GET_PROFILE_REQUEST}),me.getMe().then(function(t){e(function(e){return{type:B.GET_PROFILE_SUCCESS,data:e}}(t))},function(t){e(function(e){return{type:B.GET_PROFILE_FAILURE,error:e}}(t.toString())),e(Q.error(t.toString()))})}},exportData:function(){return function(e){e({type:B.EXPORT_REQUEST}),Ee.exportData().then(function(t){e(function(e){return{type:B.EXPORT_SUCCESS,data:e}}(t)),Ee.downloadJson("".concat(t.user_id,"_v").concat(t.version,".json"),JSON.stringify(t,null,4))},function(t){e(function(e){return{type:B.EXPORT_FAILURE,error:e}}(t))})}}},ye=n(35),ve=n(43),Oe=n(66),we=n(102),je=n.n(we),ke=n(191),Re=n(101),_e=n.n(Re),Se=n(109),xe=n(183),Ce=n(108),Te=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={width:0,height:0,logged:!1},n.updateWindowDimensions=n.updateWindowDimensions.bind(Object(ve.a)(n)),n.onAuthorize=n.onAuthorize.bind(Object(ve.a)(n)),n.onCallback=n.onCallback.bind(Object(ve.a)(n)),localStorage.removeItem(q.loggedItem),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions),window.addEventListener("message",this.onCallback)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"updateWindowDimensions",value:function(){this.setState({width:window.innerWidth,height:window.innerHeight})}},{key:"onCallback",value:function(){oe&&oe.close(),localStorage.getItem(q.loggedItem)&&this.setState({logged:!0})}},{key:"onAuthorize",value:function(){var e=this.state.width/2-250,t=this.state.height/2-390,n={client_id:q.spotifyApi.client_id,redirect_uri:q.spotifyApi.redirect_uri,scope:q.spotifyApi.scope,response_type:"token",show_dialog:"true"};oe=window.open("https://accounts.spotify.com/authorize?"+le.a.stringify(n),"Spotify","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=500, height=780, top="+t+", left="+e)}},{key:"render",value:function(){if(this.state.logged)return r.a.createElement(z.a,{to:"/"});var e=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ke.a,null),r.a.createElement("main",{className:e.layout},r.a.createElement(Ce.a,{className:e.paper},r.a.createElement(xe.a,{className:e.avatar,color:"primary"},r.a.createElement(_e.a,null)),r.a.createElement(Se.a,{variant:"h5"},"We need your Authorization"),r.a.createElement(E.a,{onClick:this.onAuthorize,fullWidth:!0,variant:"contained",color:"secondary",className:e.submit},"Proced to Authorization"))))}}]),t}(a.Component),Ie=je()(function(e){return{layout:Object(Oe.a)({width:"auto",display:"block",marginLeft:e.spacing(3),marginRight:e.spacing(3)},e.breakpoints.up(400+2*e.spacing(3)),{width:400,marginLeft:"auto",marginRight:"auto"}),paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(e.spacing(2),"px ").concat(e.spacing(3),"px ").concat(e.spacing(3),"px")},avatar:{margin:e.spacing(),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing()},submit:{marginTop:e.spacing(3)}}})(Te),Ue=n(103),Le=n.n(Ue),Ne=n(104),Ae=n.n(Ne),Pe=n(189),Fe=n(185),De=n(188),Me=n(184),ze=n(186),Ge=n(187),We=n(57),Xe=r.a.forwardRef(function(e,t){return r.a.createElement(We.a,Object.assign({innerRef:t,to:"/login"},e))}),Be=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={userLoged:!!localStorage.getItem(q.loggedItem)},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.state.userLoged&&this.props.dispatch(be.getMe())}},{key:"onNoMe",value:function(){}},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.root},r.a.createElement(Me.a,{position:"static"},r.a.createElement(Fe.a,null,r.a.createElement(ze.a,null,r.a.createElement(Se.a,{variant:"h6",className:e.title},"Portify"),this.state.userLoged&&r.a.createElement(Se.a,{component:"p",color:"inherit",align:"center",noWrap:!0,className:e.toolbarTitle},this.props.user.display_name),this.state.userLoged?r.a.createElement(Ge.a,{component:Xe,variant:"body2",color:"inherit",onClick:this.onNoMe},"It's no me"):r.a.createElement(E.a,{color:"inherit",component:Xe,size:"small"},"Login")))))}}]),t}(r.a.Component),Je=Object(P.a)(function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},toolbarTitle:{marginRight:10}}})(Object(ye.b)(function(e){return{user:e.user}})(Be)),Qe=function(e){function t(e){var n;Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).onExport=function(){n.props.dispatch(Q.info("Exporting data...")),n.props.dispatch(be.exportData())},n.onImport=function(){n.props.dispatch(Q.info("import!"))},n.state={userLoged:!!localStorage.getItem(q.loggedItem)};var a=le.a.parse(n.props.location.hash);!localStorage.getItem(q.loggedItem)&&a.access_token&&(localStorage.setItem(q.loggedItem,JSON.stringify(Object(X.a)({},a))),(window.self===window.top?window.opener:window.parent).postMessage(""));return n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ke.a,null),r.a.createElement("div",null,r.a.createElement(Je,null),r.a.createElement("main",{className:e.content},r.a.createElement("div",{className:e.appBarSpacer}),r.a.createElement(Fe.a,null,r.a.createElement(Se.a,{variant:"h2",align:"center"},"Welcome to Portify."),r.a.createElement(Se.a,{variant:"h5",component:"p",align:"center"},"Export/Import your playlists from Spotify with json file."),this.state.userLoged&&r.a.createElement(De.a,{className:e.options,container:!0,direction:"column",alignItems:"center"},r.a.createElement(De.a,{item:!0},r.a.createElement(Pe.a,{size:"large",variant:"contained","aria-label":"Options",color:"secondary"},r.a.createElement(E.a,{onClick:this.onExport},"Export",r.a.createElement(Le.a,{className:e.rightIcon})),r.a.createElement(E.a,{onClick:this.onImport},r.a.createElement(Ae.a,{className:e.leftIcon}),"Import"))))))))}}]),t}(a.Component),Ve=Object(P.a)(function(e){return{appBarSpacer:{marginTop:e.spacing(2)},options:{marginTop:e.spacing(5)},leftIcon:{marginRight:e.spacing(1)},rightIcon:{marginLeft:e.spacing(1)}}})(Object(ye.b)(function(e){return{users:e.users}})(Qe)),He=Object(G.a)({palette:{type:"dark",primary:{main:"#000",contrastText:"#fff"},secondary:{main:"#2ebd59",contrastText:"#fff"}},typography:{useNextVariants:!0},root:{display:"flex"}}),$e=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).handleClose=function(e){"clickaway"!==e&&n.props.dispatch(Q.clear())},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.alert;return r.a.createElement(z.c,{history:Y},r.a.createElement(f.a,{theme:He},e.message&&r.a.createElement(W.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:!0,onClose:e.onClose||this.handleClose,autoHideDuration:2e3},r.a.createElement(M,{onClose:e.onClose||this.handleClose,variant:e.type,message:e.message,onUndo:e.onUndo})),r.a.createElement(z.b,{path:"/"},r.a.createElement(z.d,null,r.a.createElement(z.b,{path:"/login",component:Ie}),r.a.createElement(z.b,{path:"/",component:Ve})))))}}]),t}(r.a.Component);var qe=Object(ye.b)(function(e){return{alert:e.alert}})($e);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(ye.a,{store:se},r.a.createElement(qe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[115,1,2]]]);
//# sourceMappingURL=main.475349f1.chunk.js.map