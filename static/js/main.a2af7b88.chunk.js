(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{109:function(e,t,a){e.exports=a(155)},155:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(18),i=a.n(r),s=a(22),c=a(23),l=a(25),u=a(24),p=a(26),m=a(101),d=a.n(m),g=a(33),h=a(102),E=a(15),b=Object(E.a)(),f=a(16),O={isDevelopment:!1,loggedItem:"user",homepage:"https://ramosisw.github.io/portify",spotifyApi:{url:"https://api.spotify.com/v1",scope:"user-read-private user-read-email playlist-read-private playlist-modify-public playlist-modify-private user-library-read user-library-modify playlist-read-collaborative",redirect_uri:"https://ramosisw.github.io/callback",client_id:"ba0034384cb24045a078ea5ceae26480"}};function y(){var e=JSON.parse(localStorage.getItem(O.loggedItem)),t={"Content-Type":"application/json"};return e&&e.access_token?Object(f.a)({Authorization:"Bearer "+e.access_token},t):Object(f.a)({},t)}function v(e){return e.text().then(function(t){if(!e.ok){401===e.status&&(localStorage.removeItem(O.loggedItem),window.location.reload(!0));var a=n&&n.message||e.statusText;return Promise.reject(a)}var n=t&&JSON.parse(t);return console.log(n),n})}var w=a(30),j=a(71),C=a(84),R={GET_PROFILE_REQUEST:"USER_GET_PROFILE_REQUEST",GET_PROFILE_SUCCESS:"USER_GET_PROFILE_SUCCESS",GET_PROFILE_FAILURE:"USER_GET_PROFILE_FAILURE"},S={SUCCESS:"ALERT_SUCCESS",ERROR:"ALERT_ERROR",INFO:"ALERT_INFO",CLEAR:"ALERT_CLEAR",UNDO:"ALERT_UNDO"},k={display_name:"User Name"};var _=Object(w.c)({alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S.SUCCESS:return{type:"success",message:t.message};case S.ERROR:return{type:"error",message:t.message};case S.INFO:return{type:"info",message:t.message};case S.UNDO:return Object(f.a)({},t,{undo:!0,type:"undo",message:t.message});case S.CLEAR:return{};default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.GET_PROFILE_SUCCESS:return Object(f.a)({},t.data);default:return e}}}),I=O.isDevelopment?Object(C.createLogger)():null,L=Object(w.d)(_,O.isDevelopment?Object(w.a)(j.a,I):Object(w.a)(j.a)),N=a(38),U=a(179),T=a(7),A=a(171),F=a(172),D=a(173),x=a(157),z=a(174),G=a(43),P={success:function(e){return{type:S.SUCCESS,message:e}},error:function(e){return{type:S.ERROR,message:e}},undo:function(e,t){return Object(f.a)({type:S.UNDO,message:e},t)},info:function(e){return{type:S.INFO,message:e}},clear:function(){return{type:S.CLEAR}}};var W,B=a(73),M=a.n(B),J=a(86),Q={getMe:function(){var e=Object(J.a)(M.a.mark(function e(){var t,a;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"GET",headers:Object(f.a)({},y())},a="".concat(O.spotifyApi.url,"/me"),console.log("Fetch GET: ".concat(a)),e.next=5,fetch(a,t).then(v);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},V=function(){return console.log("action.getMe"),function(e){e({type:R.GET_PROFILE_REQUEST}),Q.getMe().then(function(t){console.log("dispatch(success(data));"),e(function(e){return{type:R.GET_PROFILE_SUCCESS,data:e}}(t))},function(t){e(function(e){return{type:R.GET_PROFILE_FAILURE,error:e}}(t.toString())),e(P.error(t.toString()))})}},H=o.a.forwardRef(function(e,t){return o.a.createElement(G.a,Object.assign({innerRef:t,to:"/login"},e))}),$=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={userLoged:!!localStorage.getItem(O.loggedItem)},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.state.userLoged&&this.props.dispatch(V())}},{key:"render",value:function(){var e=this.props.classes;return console.log(this.props.users),o.a.createElement("div",{className:e.root},o.a.createElement(A.a,{position:"static"},o.a.createElement(F.a,null,o.a.createElement(D.a,null,o.a.createElement(x.a,{variant:"h6",className:e.title},"Portify"),this.state.userLoged?o.a.createElement(z.a,{color:"inherit"},this.props.users.display_name):o.a.createElement(z.a,{color:"inherit",component:H},"Login")))))}}]),t}(o.a.Component),q=Object(T.a)(function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}})(Object(N.b)(function(e){return{users:e.users}})($)),K=a(58),X=a.n(K),Y=function(e){function t(e){var a;Object(s.a)(this,t),a=Object(l.a)(this,Object(u.a)(t).call(this,e));var n=X.a.parse(a.props.location.hash);!localStorage.getItem(O.loggedItem)&&n.access_token&&(localStorage.setItem(O.loggedItem,JSON.stringify(Object(f.a)({},n))),(window.self===window.top?window.opener:window.parent).postMessage(""));return a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.classes;return o.a.createElement(o.a.Fragment,null,o.a.createElement(U.a,null),o.a.createElement("div",null,o.a.createElement(q,null),o.a.createElement("main",{className:e.content},o.a.createElement("div",{className:e.appBarSpacer}))))}}]),t}(n.Component),Z=Object(g.g)(Object(T.a)({})(Y)),ee=a(39),te=a(52),ae=a(175),ne=a(92),oe=a.n(ne),re=a(104),ie=a(93),se=a.n(ie),ce=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={width:0,height:0,logged:!1},a.updateWindowDimensions=a.updateWindowDimensions.bind(Object(ee.a)(a)),a.onAuthorize=a.onAuthorize.bind(Object(ee.a)(a)),a.onCallback=a.onCallback.bind(Object(ee.a)(a)),window.addEventListener("message",a.onCallback,!1),localStorage.removeItem(O.loggedItem),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"updateWindowDimensions",value:function(){this.setState({width:window.innerWidth,height:window.innerHeight})}},{key:"onCallback",value:function(){W&&W.close(),this.setState({logged:!0})}},{key:"onAuthorize",value:function(){var e=this.state.width/2-240,t=this.state.height/2-320,a={client_id:O.spotifyApi.client_id,redirect_uri:O.spotifyApi.redirect_uri,scope:O.spotifyApi.scope,response_type:"token",show_dialog:"true"};W=window.open("https://accounts.spotify.com/authorize?"+X.a.stringify(a),"Spotify","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=480, height=640, top="+t+", left="+e)}},{key:"render",value:function(){if(this.state.logged)return o.a.createElement(g.a,{to:"/"});var e=this.props.classes;return o.a.createElement(o.a.Fragment,null,o.a.createElement(U.a,null),o.a.createElement("main",{className:e.layout},o.a.createElement(re.a,{className:e.paper},o.a.createElement(ae.a,{className:e.avatar},o.a.createElement(oe.a,null)),o.a.createElement(x.a,{variant:"h5"},"We need your Authorization"),o.a.createElement(z.a,{onClick:this.onAuthorize,fullWidth:!0,variant:"contained",color:"primary",className:e.submit},"Proced to Authorization"))))}}]),t}(n.Component),le=se()(function(e){return{layout:Object(te.a)({width:"auto",display:"block",marginLeft:e.spacing(3),marginRight:e.spacing(3)},e.breakpoints.up(400+2*e.spacing(3)),{width:400,marginLeft:"auto",marginRight:"auto"}),paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(e.spacing(2),"px ").concat(e.spacing(3),"px ").concat(e.spacing(3),"px")},avatar:{margin:e.spacing(),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing()},submit:{marginTop:e.spacing(3)}}})(ce),ue=a(178),pe=a(103),me=a(76),de=a.n(me),ge=a(96),he=a.n(ge),Ee=a(98),be=a.n(Ee),fe=a(99),Oe=a.n(fe),ye=a(100),ve=a.n(ye),we=a(94),je=a.n(we),Ce=a(68),Re=a.n(Ce),Se=a(95),ke=a.n(Se),_e=a(59),Ie=a.n(_e),Le=a(177),Ne=a(176),Ue=a(97),Te=a.n(Ue),Ae={success:he.a,warning:Te.a,error:be.a,info:Oe.a},Fe=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.className,n=e.message,r=e.onClose,i=e.variant,s=e.onUndo,c=Object(pe.a)(e,["classes","className","message","onClose","variant","onUndo"]),l=Ae[i];return o.a.createElement(Ne.a,Object.assign({className:de()(t[i],a),"aria-describedby":"client-snackbar",message:o.a.createElement("span",{id:"client-snackbar",className:t.message},l&&o.a.createElement(l,{className:de()(t.icon,t.iconVariant)}),n),action:[s&&o.a.createElement(z.a,{key:"undo",className:t.undoButton,size:"small",onClick:s},"UNDO"),o.a.createElement(Le.a,{key:"close","aria-label":"Close",color:"inherit",className:t.close,onClick:r},o.a.createElement(ve.a,{className:t.icon}))]},c))}}]),t}(o.a.Component),De=Object(T.a)(function(e){return{success:{backgroundColor:je.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.dark},undo:{backgroundColor:Ie.a[900],color:e.palette.getContrastText(Ie.a[800])},undoButton:{color:Re.a[700]},warning:{backgroundColor:ke.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing.unit},close:{padding:e.spacing.unit/2},message:{display:"flex",alignItems:"center"}}})(Fe),xe=Object(h.a)({palette:{type:"dark",primary:{main:"#2ebd59"}},typography:{useNextVariants:!0},root:{display:"flex"}}),ze=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.alert;return o.a.createElement(g.c,{history:b},o.a.createElement(d.a,{theme:xe},e.message&&o.a.createElement(ue.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:!0,onClose:e.onClose||this.handleClose,autoHideDuration:2e3},o.a.createElement(De,{onClose:e.onClose||this.handleClose,variant:e.type,message:e.message,onUndo:e.onUndo})),o.a.createElement(g.b,{path:O.homepage+"/"},o.a.createElement(g.d,null,o.a.createElement(g.b,{path:O.homepage+"/login",component:le}),o.a.createElement(g.b,{path:O.homepage+"/",component:Z})))))}}]),t}(o.a.Component);var Ge=Object(N.b)(function(e){return{alert:e.alert}})(ze);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(N.a,{store:L},o.a.createElement(Ge,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[109,1,2]]]);
//# sourceMappingURL=main.a2af7b88.chunk.js.map