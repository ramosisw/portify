(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{114:function(e,t,a){e.exports=a(161)},161:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(18),i=a.n(r),c=a(23),s=a(24),l=a(27),u=a(25),p=a(26),m=a(104),g=a.n(m),d=a(106),h=a(74),f=a.n(h),E=a(180),b=a(87),y=a.n(b),O=a(89),v=a.n(O),w=a(90),j=a.n(w),C=a(95),S=a.n(C),k=a(85),R=a.n(k),I=a(86),_=a.n(I),N=a(54),L=a.n(N),T=a(181),U=a(179),x=a(88),A=a.n(x),F=a(6),D={success:y.a,warning:A.a,error:v.a,info:j.a},z=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.className,n=e.message,r=e.onClose,i=e.variant,c=e.onUndo,s=Object(d.a)(e,["classes","className","message","onClose","variant","onUndo"]),l=D[i];return o.a.createElement(U.a,Object.assign({className:f()(t[i],a),"aria-describedby":"client-snackbar",message:o.a.createElement("span",{id:"client-snackbar",className:t.message},l&&o.a.createElement(l,{className:f()(t.icon,t.iconVariant)}),n),action:[c&&o.a.createElement(E.a,{key:"undo",className:t.undoButton,size:"small",onClick:c},"UNDO"),o.a.createElement(T.a,{key:"close","aria-label":"Close",color:"inherit",className:t.close,onClick:r},o.a.createElement(S.a,{className:t.icon}))]},s))}}]),t}(o.a.Component),G=Object(F.a)(function(e){return{success:{backgroundColor:R.a[600],color:e.palette.primary.contrastText},error:{backgroundColor:e.palette.error.dark,color:e.palette.primary.contrastText},info:{backgroundColor:e.palette.primary.dark,color:e.palette.primary.contrastText},undo:{backgroundColor:L.a[900],color:e.palette.getContrastText(L.a[800])},undoButton:{color:e.palette.secondary.contrastText},warning:{backgroundColor:_.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing()},close:{padding:e.spacing()/2},message:{display:"flex",alignItems:"center"}}})(z),P=a(35),W=a(105),B=a(189),M=a(16),J={GET_PROFILE_REQUEST:"USER_GET_PROFILE_REQUEST",GET_PROFILE_SUCCESS:"USER_GET_PROFILE_SUCCESS",GET_PROFILE_FAILURE:"USER_GET_PROFILE_FAILURE"},Q={SUCCESS:"ALERT_SUCCESS",ERROR:"ALERT_ERROR",INFO:"ALERT_INFO",CLEAR:"ALERT_CLEAR",UNDO:"ALERT_UNDO"},V={success:function(e){return{type:Q.SUCCESS,message:e}},error:function(e){return{type:Q.ERROR,message:e}},undo:function(e,t){return Object(M.a)({type:Q.UNDO,message:e},t)},info:function(e){return{type:Q.INFO,message:e}},clear:function(){return{type:Q.CLEAR}}};var H=a(75),$=a.n(H),q=a(96),K={isDevelopment:!1,loggedItem:"user",baseName:"/portify",spotifyApi:{url:"https://api.spotify.com/v1",scope:"user-read-private user-read-email playlist-read-private playlist-modify-public playlist-modify-private user-library-read user-library-modify playlist-read-collaborative",redirect_uri:"https://ramosisw.github.io/portify",client_id:"ba0034384cb24045a078ea5ceae26480"}},X=a(15),Y=Object(X.a)({basename:K.baseName});function Z(){var e=JSON.parse(localStorage.getItem(K.loggedItem)),t={"Content-Type":"application/json"};return e&&e.access_token?Object(M.a)({Authorization:"Bearer "+e.access_token},t):Object(M.a)({},t)}function ee(e){return e.text().then(function(t){var a=t&&JSON.parse(t);if(!e.ok){401===e.status&&(localStorage.removeItem(K.loggedItem),window.location.reload(!0));var n=a&&a.message||e.statusText;return Promise.reject(n)}return a})}var te=a(34),ae=a(76),ne=a(97),oe={display_name:"User Name"};var re,ie=Object(te.c)({alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Q.SUCCESS:return{type:"success",message:t.message};case Q.ERROR:return{type:"error",message:t.message};case Q.INFO:return{type:"info",message:t.message};case Q.UNDO:return Object(M.a)({},t,{undo:!0,type:"undo",message:t.message});case Q.CLEAR:return{};default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case J.GET_PROFILE_SUCCESS:return Object(M.a)({},t.data);default:return e}}}),ce=K.isDevelopment?Object(ne.createLogger)():null,se=Object(te.d)(ie,K.isDevelopment?Object(te.a)(ae.a,ce):Object(te.a)(ae.a)),le={getMe:function(){var e=Object(q.a)($.a.mark(function e(){var t,a;return $.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"GET",headers:Object(M.a)({},Z())},a="".concat(K.spotifyApi.url,"/me"),console.log("Fetch GET: ".concat(a)),e.next=5,fetch(a,t).then(ee);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},ue=function(){return console.log("action.getMe"),function(e){e({type:J.GET_PROFILE_REQUEST}),le.getMe().then(function(t){console.log("dispatch(success(data));"),e(function(e){return{type:J.GET_PROFILE_SUCCESS,data:e}}(t))},function(t){e(function(e){return{type:J.GET_PROFILE_FAILURE,error:e}}(t.toString())),e(V.error(t.toString()))})}},pe=a(32),me=a(39),ge=a(62),de=a(101),he=a.n(de),fe=a(190),Ee=a(100),be=a.n(Ee),ye=a(108),Oe=a(182),ve=a(107),we=a(63),je=a.n(we),Ce=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={width:0,height:0,logged:!1},a.updateWindowDimensions=a.updateWindowDimensions.bind(Object(me.a)(a)),a.onAuthorize=a.onAuthorize.bind(Object(me.a)(a)),a.onCallback=a.onCallback.bind(Object(me.a)(a)),localStorage.removeItem(K.loggedItem),a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions),window.addEventListener("message",this.onCallback)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"updateWindowDimensions",value:function(){this.setState({width:window.innerWidth,height:window.innerHeight})}},{key:"onCallback",value:function(){re&&re.close(),localStorage.getItem(K.loggedItem)&&this.setState({logged:!0})}},{key:"onAuthorize",value:function(){var e=this.state.width/2-250,t=this.state.height/2-390,a={client_id:K.spotifyApi.client_id,redirect_uri:K.spotifyApi.redirect_uri,scope:K.spotifyApi.scope,response_type:"token",show_dialog:"true"};re=window.open("https://accounts.spotify.com/authorize?"+je.a.stringify(a),"Spotify","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=500, height=780, top="+t+", left="+e)}},{key:"render",value:function(){if(this.state.logged)return o.a.createElement(P.a,{to:"/options"});var e=this.props.classes;return o.a.createElement(o.a.Fragment,null,o.a.createElement(fe.a,null),o.a.createElement("main",{className:e.layout},o.a.createElement(ve.a,{className:e.paper},o.a.createElement(Oe.a,{className:e.avatar,color:"primary"},o.a.createElement(be.a,null)),o.a.createElement(ye.a,{variant:"h5"},"We need your Authorization"),o.a.createElement(E.a,{onClick:this.onAuthorize,fullWidth:!0,variant:"contained",color:"secondary",className:e.submit},"Proced to Authorization"))))}}]),t}(n.Component),Se=he()(function(e){return{layout:Object(ge.a)({width:"auto",display:"block",marginLeft:e.spacing(3),marginRight:e.spacing(3)},e.breakpoints.up(400+2*e.spacing(3)),{width:400,marginLeft:"auto",marginRight:"auto"}),paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(e.spacing(2),"px ").concat(e.spacing(3),"px ").concat(e.spacing(3),"px")},avatar:{margin:e.spacing(),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing()},submit:{marginTop:e.spacing(3)}}})(Ce),ke=a(102),Re=a.n(ke),Ie=a(103),_e=a.n(Ie),Ne=a(188),Le=a(184),Te=a(187),Ue=a(183),xe=a(185),Ae=a(186),Fe=a(53),De=o.a.forwardRef(function(e,t){return o.a.createElement(Fe.a,Object.assign({innerRef:t,to:"/login"},e))}),ze=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={userLoged:!!localStorage.getItem(K.loggedItem)},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.state.userLoged&&this.props.dispatch(ue())}},{key:"onNoMe",value:function(){}},{key:"render",value:function(){var e=this.props.classes;return o.a.createElement("div",{className:e.root},o.a.createElement(Ue.a,{position:"static"},o.a.createElement(Le.a,null,o.a.createElement(xe.a,null,o.a.createElement(ye.a,{variant:"h6",className:e.title},"Portify"),this.state.userLoged&&o.a.createElement(ye.a,{component:"p",color:"inherit",align:"center",noWrap:!0,className:e.toolbarTitle},this.props.users.display_name),this.state.userLoged?o.a.createElement(Ae.a,{component:De,variant:"body2",color:"inherit",onClick:this.onNoMe},"It's no me"):o.a.createElement(E.a,{color:"inherit",component:De,size:"small"},"Login")))))}}]),t}(o.a.Component),Ge=Object(F.a)(function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},toolbarTitle:{marginRight:10}}})(Object(pe.b)(function(e){return{users:e.users}})(ze)),Pe=function(e){function t(e){var a;Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onExport=function(){a.props.dispatch(V.info("export!"))},a.onImport=function(){a.props.dispatch(V.info("import!"))},a.state={userLoged:!!localStorage.getItem(K.loggedItem)};var n=je.a.parse(a.props.location.hash);!localStorage.getItem(K.loggedItem)&&n.access_token&&(localStorage.setItem(K.loggedItem,JSON.stringify(Object(M.a)({},n))),(window.self===window.top?window.opener:window.parent).postMessage(""));return a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes;return o.a.createElement(o.a.Fragment,null,o.a.createElement(fe.a,null),o.a.createElement("div",null,o.a.createElement(Ge,null),o.a.createElement("main",{className:e.content},o.a.createElement("div",{className:e.appBarSpacer}),o.a.createElement(Le.a,null,o.a.createElement(ye.a,{variant:"h2",align:"center"},"Welcome to Portify."),o.a.createElement(ye.a,{variant:"h5",component:"p",align:"center"},"Export/Import your playlists from Spotify with json file."),this.state.userLoged&&o.a.createElement(Te.a,{className:e.options,container:!0,direction:"column",alignItems:"center"},o.a.createElement(Te.a,{item:!0},o.a.createElement(Ne.a,{size:"large",variant:"contained","aria-label":"Options",color:"secondary"},o.a.createElement(E.a,{onClick:this.onExport},"Export",o.a.createElement(Re.a,{className:e.rightIcon})),o.a.createElement(E.a,{onClick:this.onImport},o.a.createElement(_e.a,{className:e.leftIcon}),"Import"))))))))}}]),t}(n.Component),We=Object(F.a)(function(e){return{appBarSpacer:{marginTop:e.spacing(2)},options:{marginTop:e.spacing(5)},leftIcon:{marginRight:e.spacing(1)},rightIcon:{marginLeft:e.spacing(1)}}})(Object(pe.b)(function(e){return{users:e.users}})(Pe)),Be=Object(W.a)({palette:{type:"dark",primary:{main:"#000",contrastText:"#fff"},secondary:{main:"#2ebd59",contrastText:"#fff"}},typography:{useNextVariants:!0},root:{display:"flex"}}),Me=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).handleClose=function(e){"clickaway"!==e&&a.props.dispatch(V.clear())},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.alert;return o.a.createElement(P.c,{history:Y},o.a.createElement(g.a,{theme:Be},e.message&&o.a.createElement(B.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:!0,onClose:e.onClose||this.handleClose,autoHideDuration:2e3},o.a.createElement(G,{onClose:e.onClose||this.handleClose,variant:e.type,message:e.message,onUndo:e.onUndo})),o.a.createElement(P.b,{path:"/"},o.a.createElement(P.d,null,o.a.createElement(P.b,{path:"/login",component:Se}),o.a.createElement(P.b,{path:"/",component:We})))))}}]),t}(o.a.Component);var Je=Object(pe.b)(function(e){return{alert:e.alert}})(Me);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(pe.a,{store:se},o.a.createElement(Je,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[114,1,2]]]);
//# sourceMappingURL=main.cb650cf4.chunk.js.map